/*publish time:2011-08-24 20:05:24*/
KISSY.app("TAOWANGZHI");TAOWANGZHI.Config={bwordSrc:["http://a.tbcdn.cn/p/tao123/1.0/fp/fp-bword-pkg.js"],page:{g:{url:"http://www.google.com.hk/search",search:"q"},sougou:{url:"http://www.sogou.com/sogou",search:"query"}},music:{g:{url:"http://www.google.cn/music/search",search:"q"},sogou:{url:"http://mp3.sogou.com/music.so",search:"query"}},video:{g:{url:"http://www.google.com.hk/search",search:"q"},sougou:{url:"http://video.gougou.com/search",search:"s"}},image:{g:{url:"http://images.google.com.hk/images",search:"q"},sogou:{url:"http://pic.sogou.com/pics",search:"query"}},map:{g:{url:"http://ditu.google.com/maps",search:"q"},sogou:{url:"http://map.sogou.com/",search:"lq"}},news:{g:{url:"http://news.google.com/",search:"q"},sogou:{url:"http://news.sogou.com/news",search:"query"}},swfstoreSrc:"http://a.tbcdn.cn/apps/tao123/fp/swfstore.swf",swfaudioSrc:"http://a.tbcdn.cn/apps/tao123/images/niftyplayer.swf",bellSrc:["http://a.tbcdn.cn/apps/tao123/fp/fp-bell-pkg-min.css","http://a.tbcdn.cn/apps/tao123/fp/fp-bell-pkg-min.js"],timezoneSrc:["http://a.tbcdn.cn/apps/tao123/fp/fp-timezone-pkg-min.css","http://a.tbcdn.cn/apps/tao123/fp/fp-timezone-pkg-min.js?t=20100806b"],quickSearch:"http://hao.taobao.com/search/json.php?q=",aList:["http://www.google.com.hk/search","http://www.google.cn/music/search","http://www.google.com.hk/videohp?hl=zh-CN&tab=wv","http://images.google.com.hk/images","http://ditu.google.com/maps","http://news.google.com.hk/news"],abList:["http://s.taobao.com/search","http://www.google.cn/music/search","http://images.google.com.hk/images","http://www.google.com.hk/videohp?hl=zh-CN&tab=wv","http://ditu.google.com/maps","http://baike.baidu.com/notexists"],siteRec:"http://hao.taobao.com/collectsite/my.php",logout:"http://hao.taobao.com/logout.php"};TAOWANGZHI.add("taowangzhi-loader",function(B){var E=KISSY,F=/\.css(\?.+)?$/,D=/\.js(\?.+)?$/,C=document.getElementsByTagName("head")[0],A={};function G(I,J){I=I.slice(0);function H(){if(I.length==0){J&&J();return }D.lastIndex=0;F.lastIndex=0;var L=I.shift();if(A[L]){H();return }if(F.test(L)){var K=document.createElement("link");K.type="text/css";K.rel="stylesheet";K.href=L;C.appendChild(K);A[L]=true;H()}else{if(D.test(L)){E.Ajax.getScript(L,function(){A[L]=true;H()})}}}H()}B.loadRess=G});TAOWANGZHI.add("taowangzhi-timezone-data-management",function(D){var E=KISSY,J=new Date().getTimezoneOffset()*60*1000,H=D.swfStore;var B={timezone:8,city:"\u5317\u4eac"};var A="timezone20100806b",L=E.JSON;function N(){var O=new Date().getTime();O=F(O,B.timezone);return new Date(O)}function F(O,P){return O+J+P*60*60*1000}function G(P){var O=new Date().getTime();O=F(O,P);return new Date(O)}function I(O){return("0"+O).slice(-2)}function K(O,P){O=F(O,P);var Q=new Date(O);return I(Q.getHours())+":"+I(Q.getMinutes())+":"+I(Q.getSeconds())}function C(){return B}function M(P,O){B={timezone:P,city:O};H.setItem(A,L.stringify(B));D.TimeZoneMgr.fire("change",B)}D.TimeZoneMgr={getTimeZoneDate:N,getTimeZoneConfig:C,setTimeZone:M,getSpecTimeZoneDate:G,getSpecTimeZoneDateStr:K};E.mix(D.TimeZoneMgr,E.EventTarget)});function googleHint(B){getObj("gsuggest")&&getObj("gsuggest").parentNode.removeChild(getObj("gsuggest"));var A=document.body.appendChild(document.createElement("script"));A.language="javascript";A.id="gsuggest";A.charset="utf-8";A.src="http://www.google.cn/complete/search?hl=zh-CN&client=suggest&js=true&q="+encodeURIComponent(B)}var currentInput;function myhint(a,searchType){a=a||event;var b=a.target||a.srcElement,c=getObj("suggests");currentInput=b;if(!b.value||!b.value.length||a.keyCode==27||a.keyCode==13){c.style.display="none"}else{if(a.keyCode==38||a.keyCode==40){if(c.style.display!="none"){if(a.keyCode==38){if(c._i==-1){c._i=c.firstChild.rows.length-1}else{c._i--}}else{c._i++}for(a=0;a<c.firstChild.rows.length;a++){c.firstChild.rows[a].style.background="#FFF"}if(c._i>=0&&c._i<c.firstChild.rows.length){with(c.firstChild.rows[c._i]){style.background="#E6E6E6";b.value=cells[0].attributes._h.value}}else{b.value=c._kw;c._i=-1}}}else{c._i=-1;c._kw=b.value;if(searchType=="tao"){taoHint(b.value)}else{if(searchType=="bai"){baiduHint(b.value)}else{googleHint(b.value)}}with(c.style){width=b.offsetWidth-2}c.style.top=b.getBoundingClientRect().top+b.offsetHeight-1+"px";c.style.left=b.getBoundingClientRect().left-document.documentElement.clientLeft+"px"}}}window.google={};window.google.ac={};window.google.ac.h=function(B){if(B&&B[1]&&B[0]==currentInput.value){var A="";B=B[1];for(var C=0;C<B.length;C++){if(B[C]){A+='<tr style="cursor:pointer" onmousedown="searchSubmit(\''+B[C][0]+'\');" onmouseover="javascript:this.style.background=\'#E6E6E6\'" onmouseout="javascript:this.style.background=\'#FFF\';"><td align="left" _h="'+B[C][0]+'">'+B[C][0]+'</td><td align="right" style="font-size:11.5px;"></td></tr>'}}getObj("suggests").innerHTML='<table width="100%" border="0" cellpadding="0" cellspacing="0">'+A+"</table>";setDisplay("suggests",1)}};function baiduHint(B){getObj("gsuggest")&&getObj("gsuggest").parentNode.removeChild(getObj("gsuggest"));var A=document.body.appendChild(document.createElement("script")),D=new Array(),C;A.language="javascript";A.id="gsuggest";A.charset="gb2312";C=getObj("J_search-type").value;switch(C){case"music":A.src="http://nssug.baidu.com/su?wd="+encodeURIComponent(B)+"&prod=mp3&t=1282727682131";break;case"video":A.src="http://nssug.baidu.com/su?wd="+encodeURIComponent(B)+"&prod=video&t=1282727954988";break;case"image":A.src="http://nssug.baidu.com/su?wd="+encodeURIComponent(B)+"&prod=image&t=1282727905846";break;case"news":A.src="http://nssug.baidu.com/su?wd="+encodeURIComponent(B)+"&prod=news&t=1282728079780";break;case"page":default:A.src="http://suggestion.baidu.com/su?p=3&cb=window.bdsug.sug&wd="+encodeURIComponent(B);break}}window.bdsug={};window.bdsug.sug=function(B){if(B&&B.q==currentInput.value){var A="";if(B.s.length>0){for(var E=0;E<B.s.length;E++){if(B.s[E]){var D=B.s[E];if(B.s[E].length<50){for(var C=50;C>=B.s[E].length;C--){D+="&nbsp;"}}A+='<tr style="cursor:pointer"  onmouseover="javascript:this.style.background=\'#E6E6E6\'" onmouseout="javascript:this.style.background=\'#FFF\';" onclick="setKeyWord(\''+B.s[E]+'\', event);"><td align="left" _h="'+B.s[E]+'">'+B.s[E]+'</td><td align="right" style="font-size:11.5px;"></td></tr>'}}getObj("suggests").innerHTML='<table width="100%" border="0" cellpadding="0" cellspacing="0">'+A+"</table>";setDisplay("suggests",1)}else{setDisplay("suggests",0)}}else{setDisplay("suggests",0)}};window.baidu={};window.baidu.sug=function(B){if(B&&B.q==currentInput.value){var A="";if(B.s.length>0){for(var C=0;C<B.s.length;C++){if(B.s[C]){A+='<tr style="cursor:pointer"  onmouseover="javascript:this.style.background=\'#E6E6E6\'" onmouseout="javascript:this.style.background=\'#FFF\';"  onclick="setKeyWord(\''+B.s[C]+'\', event);"><td align="left" _h="'+B.s[C]+'">'+B.s[C]+'</td><td align="right" style="font-size:11.5px;"></td></tr>'}}getObj("suggests").innerHTML='<table width="100%" border="0" cellpadding="0" cellspacing="0">'+A+"</table>";setDisplay("suggests",1)}else{setDisplay("suggests",0)}}else{setDisplay("suggests",0)}};function getObj(A){return document.getElementById(A)}function setDisplay(B,A){if(getObj(B)){getObj(B).style.display=A?"block":"none"}}function setKeyWord(A,B){B.halt||B.stopPropagation;getObj("gkeyword").value=A;googleSubmit(true)}var tdiv,dtid="dtip",tn=0,thn=0,thv,ths,ttip=true,winrow=new Array(dtid),winno="";function taoHint(B){getObj("gsuggest")&&getObj("gsuggest").parentNode.removeChild(getObj("gsuggest"));var A=document.body.appendChild(document.createElement("script"));A.language="javascript";A.id="gsuggest";A.charset="utf-8";A.src="http://suggest.taobao.com/sug?code=utf-8&callback=fbk&q="+encodeURIComponent(B)}function fbk(D){var E=D.result,B,G="",F,C=" \u4e2a\u5b9d\u8d1d",A=0;tn=E.length;thn=tn;if(tn){for(B=0;B<tn;B++){if(E[B]){G+='<tr style="cursor:pointer;" onmouseover="javascript:this.style.background=\'#E6E6E6\'" onmouseout="javascript:this.style.background=\'#FFF\';"  onclick="setTaoKeyWord(\''+E[B][0]+'\', event);"><td align="left" _h="'+E[B][0]+'">'+E[B][0]+'</td><td style="color:#090" align="right" style="font-size:11.5px;">\u7ea6 '+E[B][1]+C+"</td></tr>"}}getObj("suggests").innerHTML='<table width="100%" border="0" cellpadding="0" cellspacing="0">'+G+"</table>";setDisplay("suggests",1)}else{setDisplay("suggests",0)}}function setTaoKeyWord(A,B){B.halt||B.stopPropagation;getObj("tkeyword").value=A;setDisplay("suggests",0);getObj("taosearchform").submit()}var STYLE_SEARCH_ID="searchfromhide";function initStyle(A){var C=A.get("#"+STYLE_SEARCH_ID),B=A.DOM;if(C){return }B.addStyleSheet("#suggests {background:none repeat scroll 0 0 #FFFFFF;display:none;left:80px;position:absolute;width:360px;z-index:5000;border: 0 1px 1px 1px solid #999999;}#suggests table tbody {border:1px solid #CCCCCC;}#suggests tr {padding:0;line-height: 24px;overflow:hidden}#suggests td {padding:0;font-size: 12px;margin-left: 0; padding-left: 5px;color: #4d4d4d;}",STYLE_SEARCH_ID)}KISSY.ready(function(B){initStyle(B);var F=B.Event,D=B.DOM;B.one("body").on("click",function(E){setDisplay("suggests",0)});B.each(B.query(".keyword"),function(E,I){D.attr(E,"autocomplete","off");E.parentNode.target="_blank";if(!getObj("suggests")){var J=document.createElement("span");J.setAttribute("id","suggests");E.parentNode.parentNode.appendChild(J)}if(!getObj("sogoupid")){var H=document.createElement("input");H.setAttribute("id","sogoupid");H.setAttribute("name","pid");H.setAttribute("type","hidden");H.setAttribute("value","sogou-site-220c77af02f8ad85");E.parentNode.appendChild(H)}if(I===0){F.on(E,"keyup",function(K){myhint(K,"bai")});if(E.parentNode.tagName=="FORM"){F.on(E.parentNode,"submit",function(K){googleSubmit(false)})}}else{F.on(E,"keyup",function(K){myhint(K,"tao")})}F.on(E,"mousedown",function(){setDisplay("suggests",0)})});var A=TAOWANGZHI,G=A.loadRess;var C=A.Config.bwordSrc;G(C,function(){})});function googleSubmit(D){var F=TAOWANGZHI,E=F.loadRess,C=F.Config,L,J,G,A,H,I;var B=F.Config.bwordSrc;I=getObj("gkeyword").value;A=getObj("gsearchform");L=getObj("J_search-type").value;setDisplay("suggests",0);insertKeyWord(I,L);E(B,function(){var M=F.BWORDS||[];G=C[L].g,J=C[L].sougou,A.action=J.url,getObj("gkeyword").name=J.search});var K=KISSY.trim(I);if(K==""){A.action="http://www.sogou.com/index.php?pid=sogou-site-220c77af02f8ad85"}if(D){A.submit()}}function insertKeyWord(B,A){new Image().src="http://krq.tao123.com/gsearch.php?q="+encodeURIComponent(B)+"&search_type="+encodeURIComponent(A)};