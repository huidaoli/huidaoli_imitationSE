(function(d,c,b){if(d[c]===b){d[c]={}}c=d[c];var h=d.document,j=function(t,q,o,v){if(!q||!t){return t}if(o===b){o=true}var n,u,m;if(v&&(m=v.length)){for(n=0;n<m;n++){u=v[n];if(u in q){if(o||!(u in t)){t[u]=q[u]}}}}else{for(u in q){if(o||!(u in t)){t[u]=q[u]}}}return t},g=false,i=[],f=false,e=500,k=40,a=/^#?([\w-]+)$/;j(c,{version:"1.1.0",_init:function(){this.Env={mods:{},guid:0}},add:function(m,n){var l=this;l.Env.mods[m]={name:m,fn:n};n(l);return l},ready:function(l){if(!f){this._bindReady()}if(g){l.call(d,this)}else{i.push(l)}return this},_bindReady:function(){var n=this,l=h.documentElement.doScroll,p=l?"onreadystatechange":"DOMContentLoaded",s="complete",q=function(){n._fireReady()};f=true;if(h.readyState===s){return q()}if(h.addEventListener){function o(){h.removeEventListener(p,o,false);q()}h.addEventListener(p,o,false);d.addEventListener("load",q,false)}else{function m(){if(h.readyState===s){h.detachEvent(p,m);q()}}h.attachEvent(p,m);d.attachEvent("onload",q);if(d==d.top){function r(){try{l("left");q()}catch(t){setTimeout(r,1)}}r()}}},_fireReady:function(){if(g){return}g=true;if(i){var m,l=0;while(m=i[l++]){m.call(d,this)}i=null}},available:function(o,l){o=(o+"").match(a)[1];if(!o||!c.isFunction(l)){return}var m=1,n=c.later(function(){if(h.getElementById(o)&&(l()||1)||++m>e){n.cancel()}},k,true)},mix:j,merge:function(){var p={},n,m=arguments.length;for(n=0;n<m;++n){j(p,arguments[n])}return p},augment:function(){var m=arguments,l=m.length-2,p=m[0],o=m[l],q=m[l+1],n=1;if(!c.isArray(q)){o=q;q=b;l++}if(!c.isBoolean(o)){o=b;l++}for(;n<l;n++){j(p.prototype,m[n].prototype||m[n],o,q)}return p},extend:function(p,o,m,u){if(!o||!p){return p}var l=Object.prototype,t=function(s){function r(){}r.prototype=s;return new r()},q=o.prototype,n=t(q);p.prototype=n;n.constructor=p;p.superclass=q;if(o!==Object&&q.constructor===l.constructor){q.constructor=o}if(m){j(n,m)}if(u){j(p,u)}return p},namespace:function(){var m=arguments.length,s=null,q,n,r;for(q=0;q<m;++q){r=(""+arguments[q]).split(".");s=this;for(n=(d[r[0]]===s)?1:0;n<r.length;++n){s=s[r[n]]=s[r[n]]||{}}}return s},app:function(l,n){var m=d[l]||{};j(m,this,true,["_init","add","namespace"]);m._init();return j((d[l]=m),typeof n==="function"?n():n)},log:function(n,l,m){if(this.Config.debug){if(m){n=m+": "+n}if(d.console!==b&&console.log){console[l&&console[l]?l:"log"](n)}}return this},error:function(l){if(this.Config.debug){throw l}},guid:function(l){var m=this.Env.guid+++"";return l?l+m:m}});c._init();c.Config={debug:"@DEBUG@"}})(window,"KISSY");KISSY.add("lang",function(d,f){var c=window,r=document,i=location,h=Array.prototype,a=h.indexOf,j=h.filter,n=String.prototype.trim,m=Object.prototype.toString,e=encodeURIComponent,k=decodeURIComponent,g="hasOwnProperty",s="",l="&",b=/^\s+|\s+$/g,o=/^(\w+)\[\]$/,p=/\S/;d.mix(d,{isUndefined:function(t){return t===f},isBoolean:function(t){return typeof t==="boolean"},isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"&&isFinite(t)},isPlainObject:function(t){return t&&m.call(t)==="[object Object]"&&!t.nodeType&&!t.setInterval},isEmptyObject:function(u){for(var t in u){return false}return true},isFunction:function(t){return m.call(t)==="[object Function]"},isArray:function(t){return m.call(t)==="[object Array]"},trim:n?function(t){return(t==f)?s:n.call(t)}:function(t){return(t==f)?s:t.toString().replace(b,s)},substitute:function(v,u,t){if(!d.isString(v)||!d.isPlainObject(u)){return v}return v.replace(t||/\\?\{([^{}]+)\}/g,function(x,w){if(x.charAt(0)==="\\"){return x.slice(1)}return(u[w]!==f)?u[w]:s})},each:function(t,x,w){var u=(t&&t.length)||0,v=0;for(;v<u;++v){x.call(w||c,t[v],v,t)}},indexOf:a?function(u,t){return a.call(t,u)}:function(w,u){for(var v=0,t=u.length;v<t;++v){if(u[v]===w){return v}}return -1},inArray:function(u,t){return d.indexOf(u,t)>-1},makeArray:function(w){if(w===null||w===f){return[]}if(d.isArray(w)){return w}if(typeof w.length!=="number"||typeof w==="string"||d.isFunction(w)){return[w]}if(w.item&&d.UA.ie){var u=[],v=0,t=w.length;for(;v<t;++v){u[v]=w[v]}return u}return h.slice.call(w)},filter:j?function(t,v,u){return j.call(t,v,u)}:function(t,w,v){var u=[];d.each(t,function(z,y,x){if(w.call(v,z,y,x)){u.push(z)}});return u},param:function(z,v){if(!d.isPlainObject(z)){return s}v=v||l;var u=[],x,y;for(x in z){y=z[x];x=e(x);if(q(y)){u.push(x,"=",e(y+s),v)}else{if(d.isArray(y)&&y.length){for(var w=0,t=y.length;w<t;++w){if(q(y[w])){u.push(x,"[]=",e(y[w]+s),v)}}}}}u.pop();return u.join(s)},unparam:function(B,D){if(typeof B!=="string"||(B=d.trim(B)).length===0){return{}}var z={},t=B.split(D||l),w,C,u,v,x=0,y=t.length;for(;x<y;++x){w=t[x].split("=");C=k(w[0]);try{u=k(w[1]||s)}catch(A){u=w[1]||s}if((v=C.match(o))&&v[1]){z[v[1]]=z[v[1]]||[];z[v[1]].push(u)}else{z[C]=u}}return z},later:function(B,A,x,u,w){A=A||0;u=u||{};var v=B,z=d.makeArray(w),y,t;if(typeof B==="string"){v=u[B]}if(!v){d.error("method undefined")}y=function(){v.apply(u,z)};t=(x)?setInterval(y,A):setTimeout(y,A);return{id:t,interval:x,cancel:function(){if(this.interval){clearInterval(t)}else{clearTimeout(t)}}}},clone:function(w){var v=w,t,u;if(w&&((t=d.isArray(w))||d.isPlainObject(w))){v=t?[]:{};for(u in w){if(w[g](u)){v[u]=d.clone(w[u])}}}return v},now:function(){return new Date().getTime()},globalEval:function(v){if(v&&p.test(v)){var u=r.getElementsByTagName("head")[0]||r.documentElement,t=r.createElement("script");t.text=v;u.insertBefore(t,u.firstChild);u.removeChild(t)}}});function q(v){var u=typeof v;return v===null||(u!=="object"&&u!=="function")}if(i&&i.search&&i.search.indexOf("ks-debug")!==-1){d.Config.debug=true}});KISSY.add("ua",function(c){var b=navigator.userAgent,a,e={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},d=function(f){var g=0;return parseFloat(f.replace(/\./g,function(){return(g++===0)?".":""}))};if((a=b.match(/AppleWebKit\/([\d.]*)/))&&a[1]){e.webkit=d(a[1]);if((a=b.match(/Chrome\/([\d.]*)/))&&a[1]){e.chrome=d(a[1])}else{if((a=b.match(/\/([\d.]*) Safari/))&&a[1]){e.safari=d(a[1])}}if(/ Mobile\//.test(b)){e.mobile="Apple"}else{if((a=b.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){e.mobile=a[0]}}}else{if((a=b.match(/Opera\/.* Version\/([\d.]*)/))&&a[1]){e.opera=d(a[1]);if((b.match(/Opera Mini[^;]*/))){e.mobile=a[0]}}else{if((a=b.match(/MSIE\s([^;]*)/))&&a[1]){e.ie=d(a[1])}else{if((a=b.match(/Gecko/))){e.gecko=1;if((a=b.match(/rv:([\d.]*)/))&&a[1]){e.gecko=d(a[1])}if((a=b.match(/Firefox\/([\d.]*)/))&&a[1]){e.firefox=d(a[1])}}}}}e._numberify=d;c.UA=e});KISSY.add("dom",function(a){var b="nodeType",c={_isSupportedNode:function(d){return c._isElementNode(d)||c._isTextNode(d)},_isElementNode:function(d){return d&&d[b]===1},_isTextNode:function(d){return d&&d[b]===3},_isKSNode:function(d){return d&&a.Node&&d[b]===a.Node.TYPE}};a.DOM=c});KISSY.add("selector",function(f,d){var m=document,o=f.DOM,k=" ",c="*",g="getDOMNode",h=g+"s",p=/^#[\w-]+$/,b=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;function j(r,x){var v,w,u=[],y,q,s;x=l(x);if(f.isString(r)){r=f.trim(r);if(p.test(r)){w=a(r.slice(1),x);if(w){u=[w]}}else{if((v=b.exec(r))){y=v[1];q=v[2];s=v[3];if((x=y?a(y,x):x)){if(s){if(!y||r.indexOf(k)!==-1){u=n(s,q,x)}else{w=a(y,x);if(w&&o.hasClass(w,s)){u=[w]}}}else{if(q){u=e(q,x)}}}}else{if(f.ExternalSelector){return f.ExternalSelector(r,x)}else{i(r)}}}}else{if(r&&(r[g]||r[h])){u=r[g]?[r[g]()]:r[h]()}else{if(r&&r.nodeType){u=[r]}else{if(r&&(f.isArray(r)||r.item)){u=r}}}}if(u.item){u=f.makeArray(u)}return u}function l(q){if(q===d){q=m}else{if(f.isString(q)&&p.test(q)){q=a(q.slice(1),m)}else{if(q&&q.nodeType!==1&&q.nodeType!==9){q=null}}}return q}function a(r,q){if(q.nodeType!==9){q=q.ownerDocument}return q.getElementById(r)}function e(q,r){return r.getElementsByTagName(q)}(function(){var q=m.createElement("div");q.appendChild(m.createComment(""));if(q.getElementsByTagName(c).length>0){e=function(r,x){var u=x.getElementsByTagName(r);if(r===c){var w=[],v=0,s=0,y;while((y=u[v++])){if(y.nodeType===1){w[s++]=y}}u=w}return u}}})();function n(x,y,q){var s=q.getElementsByClassName(x),w=s,u=0,t=0,v=s.length,r;if(y&&y!==c){w=[];y=y.toUpperCase();for(;u<v;++u){r=s[u];if(r.tagName===y){w[t++]=r}}}return w}if(!m.getElementsByClassName){if(m.querySelectorAll){n=function(r,q,s){return s.querySelectorAll((q?q:"")+"."+r)}}else{n=function(z,A,q){var s=q.getElementsByTagName(A||c),x=[],v=0,u=0,w=s.length,r,y;z=k+z+k;for(;v<w;++v){r=s[v];y=r.className;if(y&&(k+y+k).indexOf(z)>-1){x[u++]=r}}return x}}}function i(q){f.error("Unsupported selector: "+q)}f.query=j;f.get=function(q,r){return j(q,r)[0]||null};f.mix(o,{query:j,get:f.get,filter:function(r,w){var t=j(r),v,q,s,u=[];if(f.isString(w)&&(v=b.exec(w))&&!v[1]){q=v[2];s=v[3];w=function(x){return !((q&&x.tagName!==q.toUpperCase())||(s&&!o.hasClass(x,s)))}}if(f.isFunction(w)){u=f.filter(t,w)}else{if(w&&f.ExternalSelector){u=f.ExternalSelector._filter(r,w)}else{i(w)}}return u},test:function(q,s){var r=j(q);return o.filter(r,s).length===r.length}})});KISSY.add("dom-class",function(b,f){var e=" ",c=b.DOM,d=/[\.\s]\s*\.?/,g=/[\n\t]/g;b.mix(c,{hasClass:function(h,i){return a(h,i,function(p,q,k){var n=p.className;if(n){var o=e+n+e,m=0,l=true;for(;m<k;m++){if(o.indexOf(e+q[m]+e)<0){l=false;break}}if(l){return true}}},true)},addClass:function(h,i){a(h,i,function(o,q,k){var m=o.className;if(!m){o.className=i}else{var n=e+m+e,p=m,l=0;for(;l<k;l++){if(n.indexOf(e+q[l]+e)<0){p+=e+q[l]}}o.className=b.trim(p)}})},removeClass:function(h,i){a(h,i,function(o,q,k){var m=o.className;if(m){if(!k){o.className=""}else{var n=(e+m+e).replace(g,e),l=0,p;for(;l<k;l++){p=e+q[l]+e;while(n.indexOf(p)>=0){n=n.replace(p,e)}}o.className=b.trim(n)}}})},replaceClass:function(h,j,i){c.removeClass(h,j);c.addClass(h,i)},toggleClass:function(h,l,k){var j=b.isBoolean(k),i;a(h,l,function(p,q,m){var n=0,o;for(;n<m;n++){o=q[n];i=j?!k:c.hasClass(p,o);c[i?"removeClass":"addClass"](p,o)}})}});function a(l,r,q,p){if(!(r=b.trim(r))){return p?false:f}var j=b.query(l),m=0,n=j.length,h=r.split(d),k,o;for(;m<n;m++){k=j[m];if(c._isElementNode(k)){o=q(k,h,h.length);if(o!==f){return o}}}if(p){return false}}});KISSY.add("dom-attr",function(b,e){var k=b.UA,m=k.ie,d=m&&m<8,t=document,r=t.documentElement,o=r.textContent!==e?"textContent":"innerText",a="select",u="",s="checked",f="style",p=b.DOM,n=p._isElementNode,i=p._isTextNode,c=/href|src|style/,g=/href|src|colspan|rowspan/,j=/\r/g,q=/radio|checkbox/,h={readonly:"readOnly"};if(d){b.mix(h,{"for":"htmlFor","class":"className"})}b.mix(p,{attr:function(v,y,A){if(b.isPlainObject(y)){for(var w in y){p.attr(v,w,y[w])}return}if(!(y=b.trim(y))){return}y=y.toLowerCase();y=h[y]||y;if(A===e){var z=b.get(v);if(!n(z)){return e}var x;if(!c.test(y)){x=z[y]}if(x===e){x=z.getAttribute(y)}if(d){if(g.test(y)){x=z.getAttribute(y,2)}else{if(y===f){x=z[f].cssText}}}return x===null?e:x}b.each(b.query(v),function(B){if(!n(B)){return}if(y===f){B[f].cssText=A}else{if(y===s){B[y]=!!A}B.setAttribute(y,u+A)}})},removeAttr:function(v,w){b.each(b.query(v),function(x){if(n(x)){p.attr(x,w,u);x.removeAttribute(w)}})},val:function(w,C){if(C===e){var B=b.get(w);if(!n(B)){return e}if(l("option",B)){return(B.attributes.value||{}).specified?B.value:B.text}if(l(a,B)){var z=B.selectedIndex,y=B.options;if(z<0){return null}else{if(B.type==="select-one"){return p.val(y[z])}}var x=[],A=0,v=y.length;for(;A<v;++A){if(y[A].selected){x.push(p.val(y[A]))}}return x}if(k.webkit&&q.test(B.type)){return B.getAttribute("value")===null?"on":B.value}return(B.value||u).replace(j,u)}b.each(b.query(w),function(E){if(l(a,E)){if(b.isNumber(C)){C+=u}var G=b.makeArray(C),F=E.options,D;for(A=0,v=F.length;A<v;++A){D=F[A];D.selected=b.inArray(p.val(D),G)}if(!G.length){E.selectedIndex=-1}}else{if(n(E)){E.value=C}}})},text:function(v,x){if(x===e){var w=b.get(v);if(n(w)){return w[o]||u}else{if(i(w)){return w.nodeValue}}}else{b.each(b.query(v),function(y){if(n(y)){y[o]=x}else{if(i(y)){y.nodeValue=x}}})}}});function l(w,v){return v&&v.nodeName.toUpperCase()===w.toUpperCase()}});KISSY.add("dom-style",function(d,e){var q=d.DOM,j=d.UA,w=document,p=w.documentElement,g="style",i="float",t="cssFloat",u="styleFloat",c="width",l="height",k="auto",o=parseInt,h=/^left|top$/,m=/width|height|top|left|right|bottom|margin|padding/i,s=/-([a-z])/ig,r=function(x,y){return y.toUpperCase()},v="",a="px",f={};d.mix(q,{_CUSTOM_STYLES:f,_getComputedStyle:function(y,x){var A="",z=y.ownerDocument;if(y[g]){A=z.defaultView.getComputedStyle(y,null)[x]}return A},css:function(x,A,C){if(d.isPlainObject(A)){for(var y in A){q.css(x,y,A[y])}return}if(A.indexOf("-")>0){A=A.replace(s,r)}A=f[A]||A;if(C===e){var B=d.get(x),z="";if(B&&B[g]){z=A.get?A.get(B):B[g][A];if(z===""&&!A.get){z=b(B,A,q._getComputedStyle(B,A))}}return z===e?"":z}else{if(C===null||C===v){C=v}else{if(!isNaN(new Number(C))&&m.test(A)){C+=a}}if((A===c||A===l)&&parseFloat(C)<0){return}d.each(d.query(x),function(D){if(D&&D[g]){A.set?A.set(D,C):(D[g][A]=C);if(C===v){if(!D[g].cssText){D.removeAttribute(g)}}}})}},width:function(x,y){if(y===e){return n(x,c)}else{q.css(x,c,y)}},height:function(x,y){if(y===e){return n(x,l)}else{q.css(x,l,y)}},addStyleSheet:function(x,z){var y;if(z){y=d.get(z)}if(!y){y=q.create("<style>",{id:z})}d.get("head").appendChild(y);if(y.styleSheet){y.styleSheet.cssText=x}else{y.appendChild(w.createTextNode(x))}}});if(p[g][t]!==e){f[i]=t}else{if(p[g][u]!==e){f[i]=u}}function n(x,y){var z=d.get(x),B=y===c?["Left","Right"]:["Top","Bottom"],A=y===c?z.offsetWidth:z.offsetHeight;d.each(B,function(C){A-=parseFloat(q._getComputedStyle(z,"padding"+C))||0;A-=parseFloat(q._getComputedStyle(z,"border"+C+"Width"))||0});return A}function b(z,y,B){var A,x=B;if(B===k&&h.test(y)){x=0;if(q.css(z,"position")==="absolute"){A=z[y==="left"?"offsetLeft":"offsetTop"];if(j.ie===8||j.opera){A-=o(q.css(z.offsetParent,"border-"+y+"-width"))||0}x=A-(o(q.css(z,"margin-"+y))||0)}}return x}});KISSY.add("dom-style-ie",function(f,d){if(!f.UA.ie){return}var p=f.DOM,m=document,c=m.documentElement,o="opacity",n="filter",j="filters",i="currentStyle",l="runtimeStyle",b="left",e="px",h=p._CUSTOM_STYLES,q=/^-?\d+(?:px)?$/i,g=/^-?\d/,a=/^width|height$/;try{if(c.style[o]===d&&c[j]){h[o]={get:function(s){var u=100;try{u=s[j]["DXImageTransform.Microsoft.Alpha"][o]}catch(t){try{u=s[j]("alpha")[o]}catch(r){}}return u/100+""},set:function(s,t){var r=s.style;r.zoom=1;r[n]="alpha("+o+"="+t*100+")"}}}}catch(k){f.log("IE filters ActiveX is disabled. ex = "+k)}if(!(m.defaultView||{}).getComputedStyle&&c[i]){p._getComputedStyle=function(v,t){var u=v.style,s=v[i][t];if(a.test(t)){s=p[t](v)+e}else{if((!q.test(s)&&g.test(s))){var w=u[b],r=v[l][b];v[l][b]=v[i][b];u[b]=t==="fontSize"?"1em":(s||0);s=u.pixelLeft+e;u[b]=w;v[l][b]=r}}return s}}});KISSY.add("dom-offset",function(d,g){var u=d.DOM,c=window,z=document,n=u._isElementNode,i=z.compatMode==="CSS1Compat",t=Math.max,s=parseInt,l="position",y="relative",f="document",r="body",m="documentElement",q="ownerDocument",h="viewport",k="scroll",e="client",j="left",o="top",w=k+"Left",v=k+"Top",a="getBoundingClientRect";d.mix(u,{offset:function(A,B){if(!(A=d.get(A))||!A[q]){return null}if(B===g){return b(A)}x(A,B)},scrollIntoView:function(Q,I,M,R){if(!(Q=d.get(Q))||!Q[q]){return}I=d.get(I);R=R===g?true:!!R;M=M===g?true:!!M;if(!n(I)){return Q.scrollIntoView(M)}var G=u.offset(Q),D=u.offset(I),K={left:G[j]-D[j],top:G[o]-D[o]},H=I.clientHeight,A=I.clientWidth,F=u[w](I),C=u[v](I),E=F+A,N=C+H,B=Q.offsetHeight,P=Q.offsetWidth,O=K.left+F-(s(u.css(I,"borderLeftWidth"))||0),J=K.top+C-(s(u.css(I,"borderTopWidth"))||0),L=O+P,S=J+B;if(B>H||J<C||M){I[v]=J}else{if(S>N){I[v]=S-H}}if(R){if(P>A||O<F||M){I[w]=O}else{if(L>E){I[w]=L-A}}}}});d.each(["Left","Top"],function(A,B){var C=k+A;u[C]=function(F){var E=0,D=F===g?c:p(F),G;if(D&&(G=D[f])){E=D[B?"pageYOffset":"pageXOffset"]||G[m][C]||G[r][C]}else{if(n((F=d.get(F)))){E=F[C]}}return E}});d.each(["Width","Height"],function(A){u["doc"+A]=function(B){var C=B||z;return t(i?C[m][k+A]:C[r][k+A],u[h+A](C))};u[h+A]=function(C){var E="inner"+A,B=p(C)||c,D=B[f];return(E in B)?B[E]:(i?D[m][e+A]:D[r][e+A])}});function b(D){var C,A=0,E=0,B=p(D[q]);if(D[a]){C=D[a]();A=C[j]+u[w](B);E=C[o]+u[v](B)}return{left:A,top:E}}function x(D,F){if(u.css(D,l)==="static"){D.style[l]=y}var A=b(D),B={},E,C;for(C in F){E=s(u.css(D,C),10)||0;B[C]=E+F[C]-A[C]}u.css(D,B)}function p(A){return(A&&("scrollTo" in A)&&A[f])?A:A&&A.nodeType===9?A.defaultView||A.parentWindow:false}});KISSY.add("dom-traversal",function(b,f){var d=b.DOM,e=d._isElementNode;b.mix(d,{parent:function(g,h){return c(g,h,"parentNode",function(i){return i.nodeType!=11})},next:function(g,h){return c(g,h,"nextSibling")},prev:function(g,h){return c(g,h,"previousSibling")},siblings:function(g,h){return a(g,h,true)},children:function(g,h){return a(g,h)},contains:function(g,i){var h=false;if((g=b.get(g))&&(i=b.get(i))){if(g.contains){return g.contains(i)}else{if(g.compareDocumentPosition){return !!(g.compareDocumentPosition(i)&16)}else{while(!h&&(i=i.parentNode)){h=i==g}}}}return h}});function c(k,i,l,j){if(!(k=b.get(k))){return null}if(i===f){i=1}var h=null,m,g;if(b.isNumber(i)&&i>=0){if(i===0){return k}m=0;g=i;i=function(){return ++m===g}}while((k=k[l])){if(e(k)&&(!i||d.test(k,i))&&(!j||j(k))){h=k;break}}return h}function a(h,n,m){var k=[],o=b.get(h),i,g=o,l;if(o&&m){g=o.parentNode}if(g){for(i=0,l=g.firstChild;l;l=l.nextSibling){if(e(l)&&l!==o&&(!n||d.test(l,n))){k[i++]=l}}}return k}});KISSY.add("dom-create",function(f,h){var D=document,z=f.DOM,l=f.UA,n=l.ie,w=z._isSupportedNode,r=z._isElementNode,t=z._isKSNode,s="div",j="parentNode",c=D.createElement(s),v=/<(\w+)/,u=/<script([^>]*)>([\s\S]*?)<\/script>/ig,g=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,A=/\ssrc=(['"])(.*?)\1/i,x=/\scharset=(['"])(.*?)\1/i;f.mix(z,{create:function(G,J,I){if(w(G)){return q(G)}if(t(G)){return q(G[0])}if(!(G=f.trim(G))){return null}var H=null,K=z._creators,E,L=s,F,p;if((E=g.exec(G))){H=(I||D).createElement(E[1])}else{if((E=v.exec(G))&&(F=E[1])&&f.isFunction(K[(F=F.toLowerCase())])){L=F}p=K[L](G,I).childNodes;if(p.length===1){H=p[0][j].removeChild(p[0])}else{H=m(p,I||D)}}return e(H,J)},_creators:{div:function(E,p){var F=p?p.createElement(s):c;F.innerHTML=E;return F}},html:function(p,G,E,H){if(G===h){var F=f.get(p);if(r(F)){return F.innerHTML}}else{f.each(f.query(p),function(I){if(r(I)){y(I,G,E,H)}})}},remove:function(p){f.each(f.query(p),function(E){if(r(E)&&E.parentNode){E.parentNode.removeChild(E)}})}});function e(E,p){if(r(E)&&f.isPlainObject(p)){z.attr(E,p)}return E}function m(E,G){var F=null,H,p;if(E&&(E.push||E.item)&&E[0]){G=G||E[0].ownerDocument;F=G.createDocumentFragment();if(E.item){E=f.makeArray(E)}for(H=0,p=E.length;H<p;H++){F.appendChild(E[H])}}else{f.log("Unable to convert "+E+" to fragment.")}return F}function q(E){var p=E.cloneNode(true);if(l.ie<8){p.innerHTML=E.innerHTML}return p}function y(G,F,E,I){if(!E){a(G,F);f.isFunction(I)&&I();return}var H=f.guid("ks-tmp-"),p=new RegExp(u);F+='<span id="'+H+'"></span>';f.available(H,function(){var P=f.get("head"),M,L,K,J,N,O,Q;p.lastIndex=0;while((M=p.exec(F))){L=M[1];K=L?L.match(A):false;if(K&&K[2]){O=D.createElement("script");O.src=K[2];if((J=L.match(x))&&J[2]){O.charset=J[2]}O.async=true;P.appendChild(O)}else{if((Q=M[2])&&Q.length>0){f.globalEval(Q)}}}(N=D.getElementById(H))&&z.remove(N);f.isFunction(I)&&I()});a(G,F)}function a(F,E){E=(E+"").replace(u,"");try{F.innerHTML=E}catch(p){while(F.firstChild){F.removeChild(F.firstChild)}if(E){F.appendChild(z.create(E))}}}if(l.gecko||n){var i=z._creators,k=z.create,C="<table>",B="</table>",d=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,b={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var o in b){(function(p){i[o]=function(F,E){return k("<"+p+">"+F+"</"+p+">",null,E)}})(b[o])}if(n){i.script=function(E,p){var F=p?p.createElement(s):c;F.innerHTML="-"+E;F.removeChild(F.firstChild);return F};if(n<8){i.tbody=function(F,E){var G=k(C+F+B,null,E),p=G.children.tags("tbody")[0];if(G.children.length>1&&p&&!d.test(F)){p[j].removeChild(p)}return G}}}f.mix(i,{optgroup:i.option,th:i.td,thead:i.tbody,tfoot:i.tbody,caption:i.tbody,colgroup:i.tbody})}});KISSY.add("dom-insertion",function(b){var c=b.DOM,d="parentNode",a="nextSibling";b.mix(c,{insertBefore:function(f,e){if((f=b.get(f))&&(e=b.get(e))&&e[d]){e[d].insertBefore(f,e)}return f},insertAfter:function(f,e){if((f=b.get(f))&&(e=b.get(e))&&e[d]){if(e[a]){e[d].insertBefore(f,e[a])}else{e[d].appendChild(f)}}return f}})});KISSY.add("event",function(c,b){var i=window,n=document,m=n.addEventListener?function(t,s,r,q){if(t.addEventListener){t.addEventListener(s,r,!!q)}}:function(s,r,q){if(s.attachEvent){s.attachEvent("on"+r,q)}},j=n.removeEventListener?function(t,s,r,q){if(t.removeEventListener){t.removeEventListener(s,r,!!q)}}:function(s,r,q){if(s.detachEvent){s.detachEvent("on"+r,q)}},g="ksEventTargetId",l=" ",k=c.now(),a={};var p={EVENT_GUID:g,special:{},add:function(w,v,u,t){if(d("add",w,v,u,t)){return}var x=h(w),q,r,s;if(x===-1||!v||!c.isFunction(u)){return}if(!x){f(w,(x=k++));a[x]={target:w,events:{}}}r=a[x].events;q=(!w.isCustomEventTarget&&p.special[v])||{};if(!r[v]){s=function(z,y){if(!z||!z.fixed){z=new c.EventObject(w,z,v);if(c.isPlainObject(y)){c.mix(z,y)}}if(q.setup){q.setup(z)}return(q.handle||p._handle)(w,z,r[v].listeners)};r[v]={handle:s,listeners:[]};if(!w.isCustomEventTarget){m(w,q.fix||v,s,q.capture)}else{if(w._addEvent){w._addEvent(v,s)}}}r[v].listeners.push({fn:u,scope:t})},remove:function(u,w,z){if(d("remove",u,w,z)){return}var q=h(u),B,y,x,r,s,v,A;if(q===-1){return}if(!q||!(v=a[q])){return}if(v.target!==u){return}B=v.events||{};if((y=B[w])){x=y.listeners;s=x.length;if(c.isFunction(z)&&s&&c.inArray(z,x)){A=[];for(r=0;r<s;++r){if(z!==x[r]){A.push(x[r])}}x=A;s=A.length}if(z===b||s===0){if(!u.isCustomEventTarget){j(u,w,y.handle)}else{if(u._addEvent){u._removeEvent(w,y.handle)}}delete B[w]}}if(w===b||c.isEmptyObject(B)){for(w in B){p.remove(u,w)}delete a[q];o(u)}},_handle:function(w,u,t){t=t.slice(0);var r,s=0,q=t.length,v;for(;s<q;++s){v=t[s];r=v.fn.call(v.scope||w,u);if((r===false&&w.isCustomEventTarget)||u.isImmediatePropagationStopped){break}}return r},_getCache:function(q){return a[q]},_simpleAdd:m,_simpleRemove:j};p.on=p.add;function d(r,q,s,u,t){if(c.isString(q)){q=c.query(q)}if(c.isArray(q)){c.each(q,function(v){p[r](v,s,u,t)});return true}if((s=c.trim(s))&&s.indexOf(l)>0){c.each(s.split(l),function(v){p[r](q,v,u,t)});return true}}function h(q){return e(q)?q[g]:-1}function f(r,s){if(!e(r)){return c.error("Text or comment node is not valid event target.")}try{r[g]=s}catch(q){c.error(q)}}function o(r){try{r[g]=b;delete r[g]}catch(q){}}function e(q){return q&&q.nodeType!==3&&q.nodeType!==8}c.Event=p;if(i.attachEvent&&!i.addEventListener){i.attachEvent("onunload",function(){var s,r;for(s in a){if((r=a[s].target)){try{p.remove(r)}catch(q){}}}})}});KISSY.add("event-object",function(a,e){var d=document,c="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");function b(i,h,g){var f=this;f.currentTarget=i;f.originalEvent=h||{};if(h){f.type=h.type;f._fix()}else{f.type=g;f.target=i}f.fixed=true}a.augment(b,{_fix:function(){var h=this,f=h.originalEvent,g=c.length,n,j=h.currentTarget,i=(j.nodeType===9)?j:(j.ownerDocument||d);while(g){n=c[--g];h[n]=f[n]}if(!h.target){h.target=h.srcElement||d}if(h.target.nodeType===3){h.target=h.target.parentNode}if(!h.relatedTarget&&h.fromElement){h.relatedTarget=(h.fromElement===h.target)?h.toElement:h.fromElement}if(h.pageX===e&&h.clientX!==e){var m=i.documentElement,k=i.body;h.pageX=h.clientX+(m&&m.scrollLeft||k&&k.scrollLeft||0)-(m&&m.clientLeft||k&&k.clientLeft||0);h.pageY=h.clientY+(m&&m.scrollTop||k&&k.scrollTop||0)-(m&&m.clientTop||k&&k.clientTop||0)}if(h.which===e){h.which=(h.charCode!==e)?h.charCode:h.keyCode}if(h.metaKey===e){h.metaKey=h.ctrlKey}if(!h.which&&h.button!==e){h.which=(h.button&1?1:(h.button&2?3:(h.button&4?2:0)))}},preventDefault:function(){var f=this.originalEvent;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}this.isDefaultPrevented=true},stopPropagation:function(){var f=this.originalEvent;if(f.stopPropagation){f.stopPropagation()}else{f.cancelBubble=true}this.isPropagationStopped=true},stopImmediatePropagation:function(){var f=this.originalEvent;if(f.stopImmediatePropagation){f.stopImmediatePropagation()}else{this.stopPropagation()}this.isImmediatePropagationStopped=true},halt:function(f){if(f){this.stopImmediatePropagation()}else{this.stopPropagation()}this.preventDefault()}});a.EventObject=b});KISSY.add("event-target",function(b,d){var a=b.Event,c=a.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(h,i){var j=this[c]||-1,e=a._getCache(j)||{},g=e.events||{},f=g[h];if(f&&b.isFunction(f.handle)){return f.handle(d,i)}},on:function(g,f,e){a.add(this,g,f,e)},detach:function(f,e){a.remove(this,f,e)}}});KISSY.add("event-mouseenter",function(b){var a=b.Event;if(!b.UA.ie){b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(c){a.special[c.name]={fix:c.fix,setup:function(d){d.type=c.name},handle:function(g,h,f){var d=h.relatedTarget;try{while(d&&d!==g){d=d.parentNode}if(d!==g){a._handle(g,h,f)}}catch(i){}}}})}});KISSY.add("event-focusin",function(b){var a=b.Event;if(document.addEventListener){b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(c){a.special[c.name]={fix:c.fix,capture:true,setup:function(d){d.type=c.name}}})}});KISSY.add("node",function(b){var c=b.DOM;function a(f,h,e){var d=this,g;if(!(d instanceof a)){return new a(f,h,e)}if(!f){d.length=0;return}if(c._isSupportedNode(f)){g=f}else{if(typeof f==="string"){g=c.create(f,h,e)}}d[0]=g}a.TYPE="-ks-Node";b.augment(a,{length:1,getDOMNode:function(){return this[0]},nodeType:a.TYPE});b.one=function(d,e){var f=b.get(d,e);return f?new a(f):null};b.Node=a});KISSY.add("nodelist",function(b){var d=b.DOM,c=Array.prototype;function a(e){if(!(this instanceof a)){return new a(e)}c.push.apply(this,e||[])}b.mix(a.prototype,{length:0,item:function(f){var e=null;if(d._isElementNode(this[f])){e=new b.Node(this[f])}return e},getDOMNodes:function(){return c.slice.call(this)},each:function(h,g){var e=this.length,f=0,j;for(;f<e;++f){j=new b.Node(this[f]);h.call(g||j,j,f,this)}return this}});b.all=function(e,f){return new a(b.query(e,f,true))};b.NodeList=a});KISSY.add("node-attach",function(d,b){var m=d.DOM,k=d.Event,c=d.Node.prototype,a=d.NodeList.prototype,e="getDOMNode",f=e+"s",g=1,i=2,l=4;function j(o,s,n,r){var p=this[o?f:e](),q=[p].concat(d.makeArray(s));if(s[n]===b){return r.apply(m,q)}else{r.apply(m,q);return this}}function h(o,n){d.each(o,function(p){d.each([c,a],function(r,q){r[p]=(function(s){switch(n){case g:return function(){return j.call(this,q,arguments,1,s)};case i:return function(){return j.call(this,q,arguments,0,s)};case l:return function(){var t=this[q?f:e](),u=s.apply(m,[t].concat(d.makeArray(arguments)));return u?new d[d.isArray(u)?"NodeList":"Node"](u):null};default:return function(){var t=this[q?f:e](),u=s.apply(m,[t].concat(d.makeArray(arguments)));return u===b?this:u}}})(m[p])})})}d.mix(c,{one:function(n){return d.one(n,this[0])},all:function(n){return d.all(n,this[0])}});h(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);h(["attr","removeAttr"],g);h(["val","text"],i);h(["css"],g);h(["width","height"],i);h(["offset"],i);h(["scrollIntoView"]);h(["parent","next","prev","siblings","children"],l);h(["contains"]);h(["html"],i);h(["remove"]);d.each(["insertBefore","insertAfter"],function(n){c[n]=function(o){m[n].call(m,this[0],o);return this}});d.each([c,a],function(n){d.mix(n,{append:function(o){if(o){d.each(this,function(p){p.appendChild(m.create(o))})}return this},appendTo:function(o){if((o=d.get(o))&&o.appendChild){d.each(this,function(p){o.appendChild(p)})}return this}})});d.each([c,a],function(n){d.mix(n,d.EventTarget);n._addEvent=function(q,r){for(var p=0,o=this.length;p<o;p++){k._simpleAdd(this[p],q,r)}};n._removeEvent=function(q,r){for(var p=0,o=this.length;p<o;p++){k._simpleRemove(this[p],q,r)}};delete n.fire})});KISSY.add("ajax",function(b){var d=document,a=d.createElement("script"),c=a.readyState?function(e,f){e.onreadystatechange=function(){var g=e.readyState;if(g==="loaded"||g==="complete"){e.onreadystatechange=null;f.call(this)}}}:function(e,f){e.onload=f};b.mix(b,{getScript:function(e,i,h){var f=b.get("head")||d.documentElement,g=d.createElement("script");g.src=e;if(h){g.charset=h}g.async=true;if(b.isFunction(i)){c(g,i)}f.insertBefore(g,f.firstChild)}})});KISSY.add("cookie",function(a){var e=document,c=encodeURIComponent,d=decodeURIComponent;a.Cookie={get:function(h){var g,f;if(b(h)){if((f=e.cookie.match("(?:^| )"+h+"(?:(?:=([^;]*))|;|$)"))){g=f[1]?d(f[1]):""}}return g},set:function(h,m,f,i,k,j){var l=c(m),g=f;if(typeof g==="number"){g=new Date();g.setTime(g.getTime()+f*86400000)}if(g instanceof Date){l+="; expires="+g.toUTCString()}if(b(i)){l+="; domain="+i}if(b(k)){l+="; path="+k}if(j){l+="; secure"}e.cookie=h+"="+l},remove:function(f,g,i,h){this.set(f,"",0,g,i,h)}};function b(f){return a.isString(f)&&f!==""}});KISSY.add("json",function(S){var JSON=S.JSON=window.JSON||{};function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}});KISSY.add("attribute-base",function(c,b){var i=c.EventTarget,f="before",d="Change",g="after";function h(j){var k=j.charAt(0);return k.toUpperCase()+j.substring(1)}function a(){this._state={};this._values={}}c.augment(a,{addAttribute:function(j,k){this._state[j]=k},set:function(j,m){var l=this;var k=l.get(j);if(k===m){return}if(l.fire(f+h(j)+d,{preVal:k,newVal:m})===false){return}l._set.apply(this,arguments);l.fire(g+h(j)+d,{preVal:k,newVal:this._values[j]})},_set:function(j,l){var k=this._state[j],m=b,n=k&&k.setter;if(n){m=n.apply(this,[l])}if(m!==b){l=m}this._values[j]=l},_getDefaultValue:function(j){var k=this._state[j];if(!k){return}if(k.valueFn){k.value=k.valueFn.call(this);delete k.valueFn}return k.value},get:function(k){var l=this;var n=l._state[k],j=n&&n.getter,m=k in l._values?l._values[k]:l._getDefaultValue(k);if(j){m=j.call(l,m)}return m},reset:function(j){var k=this;if(j!==b){k.set(j,k._getDefaultValue(j));return}for(var j in k._state){if(this._state.hasOwnProperty(j)){this.reset(j)}}}});function e(j){var k=this;a.call(k);k._initAttr();k._initial(j)}c.augment(e,i,a,{constructor:e,_initAttr:function(){var k=this.constructor;while(k){if(k.ATTRS){for(var j in k.ATTRS){if(k.ATTRS.hasOwnProperty(j)){this.addAttribute(j,k.ATTRS[j])}}}k=k.superclass?k.superclass.constructor:null}},_initial:function(k){for(var j in k){if(k.hasOwnProperty(j)){this._set(j,k[j])}}}});c.Base=e});KISSY.add("datalazyload",function(g,c){var p=g.DOM,n=g.Event,i=window,m=document,o="data-ks-lazyload",q="ks-datalazyload",l="-custom",b="manual",e="display",h="default",j="none",k="scroll",a="resize",f={mod:b,diff:h,placeholder:j};function d(t,s){var r=this;if(!(r instanceof d)){return new d(t,s)}if(s===c){s=t;t=[m]}if(!g.isArray(t)){t=[g.get(t)||m]}r.containers=t;r.config=g.merge(f,s);r._init()}g.augment(d,{_init:function(){var r=this;r.threshold=r._getThreshold();r._filterItems();r._getItemsLength()&&r._initLoadEvent()},_filterItems:function(){var B=this,u=B.containers,t,A,y,r,x,z,w,s,C=[],v=[];for(t=0,A=u.length;t<A;++t){y=g.query("img",u[t]);C=C.concat(g.filter(y,B._filterImg,B));r=g.query("textarea",u[t]);v=v.concat(g.filter(r,B._filterArea,B))}B.images=C;B.areas=v},_filterImg:function(t){var s=this,u=t.getAttribute(o),r=s.threshold,w=s.config.placeholder,v=s.config.mod===b;if(v){if(u){if(w!==j){t.src=w}return true}}else{if(p.offset(t).top>r&&!u){p.attr(t,o,t.src);if(w!==j){t.src=w}else{t.removeAttribute("src")}return true}}},_filterArea:function(r){return p.hasClass(r,q)},_initLoadEvent:function(){var u,t=this;n.on(i,k,r);n.on(i,a,function(){t.threshold=t._getThreshold();r()});if(t._getItemsLength()){g.ready(function(){s()})}function r(){if(u){return}u=setTimeout(function(){s();u=null},100)}function s(){t._loadItems();if(t._getItemsLength()===0){n.remove(i,k,r);n.remove(i,a,r)}}},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){var r=this;r.images=g.filter(r.images,r._loadImg,r)},_loadImg:function(t){var s=this,u=p.scrollTop(),r=s.threshold+u,v=p.offset(t);if(v.top<=r){s._loadImgSrc(t)}else{return true}},_loadImgSrc:function(s,r){r=r||o;var t=s.getAttribute(r);if(t&&s.src!=t){s.src=t;s.removeAttribute(r)}},_loadAreas:function(){var r=this;r.areas=g.filter(r.areas,r._loadArea,r)},_loadArea:function(t){var r=this,u,s=p.css(t,e)===j;u=p.offset(s?t.parentNode:t).top;if(u<=r.threshold+p.scrollTop()){r._loadAreaData(t.parentNode,t)}else{return true}},_loadAreaData:function(r,t){t.style.display=j;t.className="";var s=p.create("<div>");r.insertBefore(s,t);p.html(s,t.value,true)},_getThreshold:function(){var r=this.config.diff,s=p.viewportHeight();if(r===h){return 2*s}else{return s+r}},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(u,s){var r=this,t,v;if(!g.isArray(u)){u=[g.get(u)]}g.each(u,function(w){switch(s){case"img-src":if(w.nodeName==="IMG"){v=[w]}else{v=g.query("img",w)}g.each(v,function(x){r._loadImgSrc(x,o+l)});break;default:t=g.get("textarea",w);if(t&&p.hasClass(t,q+l)){r._loadAreaData(w,t)}}})}});g.mix(d,d.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);g.DataLazyload=d});KISSY.add("switchable",function(h,d){var p=h.DOM,n=h.Event,e="display",a="block",l="none",b="forward",g="backward",i=".",k="beforeInit",m="init",c="beforeSwitch",j="switch",f="ks-switchable-";function o(q,s){var r=this;s=s||{};if(!("markupType" in s)){if(s.panelCls){s.markupType=1}else{if(s.panels){s.markupType=2}}}s=h.merge(o.Config,s);r.container=h.get(q);r.config=s;r.activeIndex=s.activeIndex;r._init()}o.Config={markupType:0,navCls:f+"nav",contentCls:f+"content",triggerCls:f+"trigger",panelCls:f+"panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"ks-active",steps:1,viewSize:[]};o.Plugins=[];h.augment(o,h.EventTarget,{_init:function(){var r=this,q=r.config;if(r.fire(k)===false){return}r._parseMarkup();if(q.hasTriggers){r._bindTriggers()}h.each(o.Plugins,function(s){if(s.init){s.init(r)}});r.fire(m)},_parseMarkup:function(){var z=this,r=z.container,v=z.config,q,w,y=[],x=[],u,s,t;switch(v.markupType){case 0:q=h.get(i+v.navCls,r);if(q){y=p.children(q)}w=h.get(i+v.contentCls,r);x=p.children(w);break;case 1:y=h.query(i+v.triggerCls,r);x=h.query(i+v.panelCls,r);break;case 2:y=v.triggers;x=v.panels;break}s=x.length;z.length=s/v.steps;if(v.hasTriggers&&s>0&&y.length===0){y=z._generateTriggersMarkup(z.length)}z.triggers=h.makeArray(y);z.panels=h.makeArray(x);z.content=w||x[0].parentNode},_generateTriggersMarkup:function(r){var t=this,s=t.config,v=p.create("<ul>"),q,u;v.className=s.navCls;for(u=0;u<r;u++){q=p.create("<li>");if(u===t.activeIndex){q.className=s.activeTriggerCls}q.innerHTML=u+1;v.appendChild(q)}t.container.appendChild(v);return p.children(v)},_bindTriggers:function(){var s=this,r=s.config,v=s.triggers,t,u,q=v.length;for(u=0;u<q;u++){(function(w){t=v[w];n.on(t,"click focus",function(){s._onFocusTrigger(w)});if(r.triggerType==="mouse"){n.on(t,"mouseenter",function(){s._onMouseEnterTrigger(w)});n.on(t,"mouseleave",function(){s._onMouseLeaveTrigger(w)})}})(u)}},_onFocusTrigger:function(r){var q=this;if(!q._triggerIsValid()){return}this._cancelSwitchTimer();q.switchTo(r)},_onMouseEnterTrigger:function(r){var q=this;if(!q._triggerIsValid()){return}q.switchTimer=h.later(function(){q.switchTo(r)},q.config.delay*1000)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(q){return this.activeIndex!==q},_cancelSwitchTimer:function(){var q=this;if(q.switchTimer){q.switchTimer.cancel();q.switchTimer=d}},switchTo:function(r,x){var y=this,s=y.config,u=y.triggers,t=y.panels,z=y.activeIndex,v=s.steps,w=z*v,q=r*v;if(!y._triggerIsValid()){return y}if(y.fire(c,{toIndex:r})===false){return y}if(s.hasTriggers){y._switchTrigger(z>-1?u[z]:null,u[r])}if(x===d){x=r>z?b:g}y._switchView(t.slice(w,w+v),t.slice(q,q+v),r,x);y.activeIndex=r;return y},_switchTrigger:function(s,q){var r=this.config.activeTriggerCls;if(s){p.removeClass(s,r)}p.addClass(q,r)},_switchView:function(s,r,q){p.css(s,e,l);p.css(r,e,a);this._fireOnSwitch(q)},_fireOnSwitch:function(q){this.fire(j,{currentIndex:q})},prev:function(){var r=this,q=r.activeIndex;r.switchTo(q>0?q-1:r.length-1,g)},next:function(){var r=this,q=r.activeIndex;r.switchTo(q<r.length-1?q+1:0,b)}});h.Switchable=o});KISSY.add("switchable-autoplay",function(c,d){var b=c.Event,a=c.Switchable;c.mix(a.Config,{autoplay:false,interval:5,pauseOnHover:true});a.Plugins.push({name:"autoplay",init:function(h){var f=h.config,g=f.interval*1000,i;if(!f.autoplay){return}if(f.pauseOnHover){b.on(h.container,"mouseenter",function(){if(i){i.cancel();i=d}h.paused=true});b.on(h.container,"mouseleave",function(){h.paused=false;e()})}function e(){i=c.later(function(){if(h.paused){return}h.switchTo(h.activeIndex<h.length-1?h.activeIndex+1:0,"forward")},g,true)}e()}})});KISSY.add("switchable-effect",function(f,g){var q=f.DOM,r=f.Anim,o="display",u="block",i="none",n="opacity",d="z-index",l="position",s="relative",t="absolute",c="scrollx",a="scrolly",b="fade",j="left",m="top",k="float",h="px",e=f.Switchable,p;f.mix(e.Config,{effect:i,duration:0.5,easing:"easeNone"});e.Effects={none:function(w,v,x){q.css(w,o,i);q.css(v,o,u);x()},fade:function(A,v,B){if(A.length!==1){f.error("fade effect only supports steps == 1.")}var x=this,w=x.config,z=A[0],y=v[0];if(x.anim){x.anim.stop(true)}q.css(y,n,1);x.anim=new r(z,{opacity:0},w.duration,w.easing,function(){x.anim=g;q.css(y,d,9);q.css(z,d,1);B()}).run()},scroll:function(y,v,B,w){var C=this,x=C.config,D=x.effect===c,A=C.viewSize[D?0:1]*w,z={};z[D?j:m]=-A+h;if(C.anim){C.anim.stop()}C.anim=new r(C.content,z,x.duration,x.easing,function(){C.anim=g;B()}).run()}};p=e.Effects;p[c]=p[a]=p.scroll;e.Plugins.push({name:"effect",init:function(C){var w=C.config,F=w.effect,z=C.panels,y=C.content,B=w.steps,D=C.activeIndex,x=z.length;C.viewSize=[w.viewSize[0]||z[0].offsetWidth*B,w.viewSize[1]||z[0].offsetHeight*B];if(F!==i){f.each(z,function(G){q.css(G,o,u)});switch(F){case c:case a:q.css(y,l,t);q.css(y.parentNode,l,s);if(F===c){q.css(z,k,j);q.width(y,C.viewSize[0]*(x/B))}break;case b:var v=D*B,A=v+B-1,E;f.each(z,function(G,H){E=H>=v&&H<=A;q.css(G,{opacity:E?1:0,position:t,zIndex:E?9:1})});break}}}});f.augment(e,{_switchView:function(C,v,y,B){var x=this,w=x.config,A=w.effect,z=f.isFunction(A)?A:p[A];z.call(x,C,v,function(){x._fireOnSwitch(y)},y,B)}})});KISSY.add("switchable-circular",function(k,g){var p=k.DOM,n="position",l="relative",e="left",h="top",f="",i="px",d="forward",j="backward",c="scrollx",a="scrolly",o=k.Switchable;k.mix(o.Config,{circular:false});function q(y,s,D,v,B){var F=this,w=F.config,x=F.length,E=F.activeIndex,G=w.scrollType===c,r=G?e:h,u=F.viewSize[G?0:1],C=-u*v,z={},t,A=B===j;t=(A&&E===0&&v===x-1)||(B===d&&E===x-1&&v===0);if(t){C=b.call(F,F.panels,v,A,r,u)}z[r]=C+i;if(F.anim){F.anim.stop()}F.anim=new k.Anim(F.content,z,w.duration,w.easing,function(){if(t){m.call(F,F.panels,v,A,r,u)}F.anim=g;D()}).run()}function b(y,v,z,r,w){var D=this,x=D.config,A=x.steps,u=D.length,s=z?u-1:0,C=s*A,B=(s+1)*A,t;for(t=C;t<B;t++){p.css(y[t],n,l);p.css(y[t],r,(z?-1:1)*w*u)}return z?w:-w*u}function m(y,v,z,r,w){var D=this,x=D.config,A=x.steps,u=D.length,s=z?u-1:0,C=s*A,B=(s+1)*A,t;for(t=C;t<B;t++){p.css(y[t],n,f);p.css(y[t],r,f)}p.css(D.content,r,z?-w*(u-1):f)}o.Plugins.push({name:"circular",init:function(s){var r=s.config;if(r.circular&&(r.effect===c||r.effect===a)){r.scrollType=r.effect;r.effect=q}}})});KISSY.add("switchable-lazyload",function(f){var g=f.DOM,d="beforeSwitch",e="img-src",a="area-data",c={},b=f.Switchable;c[e]="data-ks-lazyload-custom";c[a]="ks-datalazyload-custom";f.mix(b.Config,{lazyDataType:a});b.Plugins.push({name:"lazyload",init:function(m){var l=f.DataLazyload,i=m.config,k=i.lazyDataType,h=c[k];if(!l||!k||!h){return}m.on(d,n);function n(p){var o=i.steps,r=p.toIndex*o,q=r+o;l.loadCustomLazyData(m.panels.slice(r,q),k);if(j()){m.detach(d,n)}}function j(){var q,s,o,p=k===e,r=p?"img":(k===a?"textarea":"");if(r){q=f.query(r,m.container);for(s=0,o=q.length;s<o;s++){if(p?g.attr(q[s],h):g.hasClass(q[s],h)){return false}}}return true}}})});KISSY.add("switchable-countdown",function(b,a){var i=b.DOM,h=b.Event,d=b.Anim,j=b.Switchable,c="ks-switchable-trigger-",g=c+"mask",e=c+"content",f="style";b.mix(j.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});j.Plugins.push({name:"countdown",init:function(s){var p=s.config,k=p.interval,q=s.triggers,t=[],n=p.countdownFromStyle,r=p.countdownToStyle,o;if(!p.autoplay||!p.hasTriggers||!p.countdown){return}b.each(q,function(u,v){u.innerHTML='<div class="'+g+'"></div><div class="'+e+'">'+u.innerHTML+"</div>";t[v]=u.firstChild});if(p.pauseOnHover){h.on(s.container,"mouseenter",function(){l();var u=t[s.activeIndex];if(n){o=new d(u,n,0.2,"easeOut").run()}else{i.removeAttr(u,f)}});h.on(s.container,"mouseleave",function(){l();i.removeAttr(t[s.activeIndex],f);b.later(m,200)})}s.on("beforeSwitch",function(){l();i.removeAttr(t[s.activeIndex],f)});s.on("switch",function(){if(!s.paused){m()}});m(s.activeIndex);function m(){l();o=new d(t[s.activeIndex],r,k-0.5).run()}function l(){if(o){o.stop();o=a}}}})});KISSY.add("switchable-autorender",function(a){a.Switchable.autoRender=function(c,b,d){b="."+(b||"KS_");d=d||"data-ks-switchable";a.each(["Switchable","Tabs","Slide","Carousel","Accordion"],function(e){a.each(a.query(b+e,c),function(h){try{var f=h.getAttribute(d);if(f){f=f.replace(/'/g,'"')}new a[e](h,a.JSON.parse(f))}catch(g){a.log("Switchable.autoRender: "+g,"warn")}})})}});KISSY.add("tabs",function(b){function a(c,e){var d=this;if(!(d instanceof a)){return new a(c,e)}a.superclass.constructor.call(d,c,e)}b.extend(a,b.Switchable);b.Tabs=a});KISSY.add("slide",function(b){var a={autoplay:true,circular:true};function c(d,f){var e=this;if(!(e instanceof c)){return new c(d,f)}c.superclass.constructor.call(e,d,b.merge(a,f))}b.extend(c,b.Switchable);b.Slide=c});KISSY.add("carousel",function(d,b){var k=d.DOM,j=d.Event,e="ks-switchable-",f=".",g="prevBtn",a="nextBtn",c={circular:true,prevBtnCls:e+"prev-btn",nextBtnCls:e+"next-btn",disableBtnCls:e+"disable-btn"};function h(l,n){var m=this;if(!(m instanceof h)){return new h(l,n)}m.on("init",function(){i(m)});h.superclass.constructor.call(m,l,d.merge(c,n))}d.extend(h,d.Switchable);d.Carousel=h;function i(m){var l=m.config,n=l.disableBtnCls;d.each(["prev","next"],function(p){var o=m[p+"Btn"]=d.get(f+l[p+"BtnCls"],m.container);j.on(o,"click",function(q){q.preventDefault();if(!k.hasClass(o,n)){m[p]()}})});if(!l.circular){m.on("switch",function(q){var o=q.currentIndex,p=(o===0)?m[g]:(o===m.length-1)?m[a]:b;k.removeClass([m[g],m[a]],n);if(p){k.addClass(p,n)}})}j.on(m.panels,"click focus",function(){m.fire("itemSelected",{item:this})})}});KISSY.add("accordion",function(c){var e=c.DOM,d="display",g="block",f="none",b={markupType:1,triggerType:"click",multiple:false};function a(h,j){var i=this;if(!(i instanceof a)){return new a(h,j)}a.superclass.constructor.call(i,h,c.merge(b,j))}c.extend(a,c.Switchable);c.Accordion=a;c.augment(a,{_triggerIsValid:function(h){return this.activeIndex!==h||this.config.multiple},_switchView:function(m,l,k){var j=this,i=j.config,h=l[0];if(i.multiple){e.toggleClass(j.triggers[k],i.activeTriggerCls);e.css(h,d,h.style[d]==f?g:f);this._fireOnSwitch(k)}else{a.superclass._switchView.call(j,m,l,k)}}})});KISSY.add("swf-ua",function(b){function a(){var f=0,h="ShockwaveFlash",g=navigator.mimeTypes["application/x-shockwave-flash"],i,d;if(g){if((d=g.enabledPlugin)){f=c(d.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."))}}else{try{i=new ActiveXObject(h+"."+h+".6");i.AllowScriptAccess="always"}catch(j){if(i!==null){f=6}}if(f===0){try{f=c(new ActiveXObject(h+"."+h)["GetVariable"]("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(j){}}}return parseFloat(f)}function c(d){var e=d[0]+".";switch(d[2].toString().length){case 1:e+="00";break;case 2:e+="0";break}return(e+=d[2])}b.UA.flash=a()});KISSY.add("swf",function(d){var g=d.UA,e=d.now(),j=10.22,b="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",f="application/x-shockwave-flash",a="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+e,c="KISSY.SWF.eventHandler",h={align:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};function i(m,r,q){var y=this,k="ks-swf-"+e++,l=parseFloat(q.version)||j,v=g.flash>=l,u=g.flash>=8,o=u&&q.useExpressInstall&&!v,x=(o)?a:r,n="YUISwfId="+k+"&YUIBridgeCallback="+c;y.id=k;i.instances[k]=y;if((m=d.get(m))&&(v||o)&&x){if(g.ie){var t="<object ";t+='id="'+k+'" ';if(g.ie){t+='classid="'+b+'" '}else{t+='type="'+f+'" data="'+x+'" '}t+='width="100%" height="100%">';if(g.ie){t+='<param name="movie" value="'+x+'"/>'}for(var s in q.fixedAttributes){if(h.hasOwnProperty(s)){t+='<param name="'+s+'" value="'+q.fixedAttributes[s]+'"/>'}}for(var w in q.flashVars){var p=q.flashVars[w];if(typeof p==="string"){n+="&"+w+"="+encodeURIComponent(p)}}t+='<param name="flashVars" value="'+n+'"/>';t+="</object>"}else{var t="<embed ";t+=' id="'+k+'" ';t+=' src="'+r+'" ';for(var s in q.fixedAttributes){if(h.hasOwnProperty(s)){t+=s+'="'+q.fixedAttributes[s]+'" '}}for(var w in q.flashVars){var p=q.flashVars[w];if(typeof p==="string"){n+="&"+w+"="+encodeURIComponent(p)}}t+=' FlashVars="'+n+'" ';t+=" />"}}m.innerHTML=t;y.swf=d.get("#"+k)}i.instances=(d.SWF||{}).instances||{};i.eventHandler=function(k,l){i.instances[k]._eventHandler(l)};d.augment(i,d.EventTarget);d.augment(i,{_eventHandler:function(m){var k=this,l=m.type;if(l==="log"){d.log(m.message)}else{if(l){k.fire(l,m)}}},callSWF:function(o,m){var l=this;m=m||[];try{if(l.swf[o]){return l.swf[o].apply(l.swf,m)}}catch(p){var n="",k="";if(m.length!=0){n="'"+m.join("','")+"'"}k="return self.swf."+o+"("+n+");";return(new Function("self",k))(l)}}});d.SWF=i});KISSY.add("swfstore",function(c,g){var e=c.UA,b=c.Cookie,d="swfstore",f=document;function a(n,h,l,m){var j="other",k=b.get(d),o,i=this;l=(l!==g?l:true)+"";m=(m!==g?m:true)+"";if(e.ie){j="ie"}else{if(e.gecko){j="gecko"}else{if(e.webkit){j="webkit"}else{if(e.opera){j="opera"}}}}if(!k||k==="null"){b.set(d,(k=Math.round(Math.random()*Math.PI*100000)))}o={version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:f.location.hostname,shareData:l,browser:k,useCompression:m}};if(!h){h=f.body.appendChild(c.DOM.create('<div style="height:0;width:0;overflow:hidden"></div>'))}i.embeddedSWF=new c.SWF(h,n||"swfstore.swf",o);i.embeddedSWF._eventHandler=function(p){c.SWF.prototype._eventHandler.call(i,p)}}c.augment(a,c.EventTarget);c.augment(a,{setItem:function(h,i){if(typeof i==="string"){i=i.replace(/\\/g,"\\\\")}else{i=c.JSON.stringify(i)+""}if((h=c.trim(h+""))){try{return this.embeddedSWF.callSWF("setItem",[h,i])}catch(j){this.fire("error",{message:j})}}},getItem:function(h){return this.embeddedSWF.callSWF("getValueOf",[h])}});c.each(["getValueAt","getNameAt","getValueOf","getItems","getLength","removeItem","removeItemAt","clear","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(h){a.prototype[h]=function(){try{return this.embeddedSWF.callSWF(h,c.makeArray(arguments))}catch(i){this.fire("error",{message:i})}}});c.SWFStore=a});KISSY.add("swfAudioLite",function(b){function a(e,c){var f={version:9.115,useExpressInstall:false},d=this;if(!c){c=document.body.appendChild(b.DOM.create('<div style="height:0;width:0;overflow:hidden"></div>'))}d.embeddedSWF=new b.SWF(c,e||"niftyplayer.swf",f);this._waits=[];var g=setInterval(function(){if(d._loaded()){clearInterval(g);g=null;for(var h=0;h<d._waits.length;h++){d._waits[h].call(d)}d._waits=null}},100)}b.augment(a,{loadUrl:function(c){this.embeddedSWF.callSWF("SetVariable",["currentSong",c]);this.load()},loadAndPlay:function(c){this.loadUrl(c);this.play()},getState:function(){var d=this.embeddedSWF.callSWF("GetVariable",["playingState"]);var c=this.embeddedSWF.callSWF("GetVariable",["loadingState"]);if(d=="playing"){if(c=="loaded"){return d}else{return c}}if(d=="stopped"){if(c=="empty"){return c}}if(c=="error"){return c}else{return d}return d},_loaded:function(){return this.embeddedSWF.callSWF("PercentLoaded")==100},_ready:function(c){if(this._loaded()){c()}else{this._waits.push(c)}},on:function(c,d){if(c=="ready"){this._ready(d)}else{try{return this.embeddedSWF.callSWF("SetVariable",arguments)}catch(f){}}}});b.each(["play","load","stop","pause","playToggle","reset"],function(c){a.prototype[c]=function(){try{return this.embeddedSWF.callSWF("TCallLabel",["/",c])}catch(d){}}});b.each(["getPlayingState","getLoadingState"],function(c){a.prototype[c]=function(){try{return this.embeddedSWF.callSWF("GetVariable",[c])}catch(d){}}});b.SWFAudioLite=a});KISSY.Ajax=KISSY.Ajax||{};KISSY.Ajax.getScript=KISSY.getScript;KISSY.ready(function(c){var a=new c.Node(document.body),b="http://www.atpanel.com/twz.2";var d={saveLog:function(g){d.sendReq("http://www.atpanel.com/twz.2?"+c.param(g));d.sendReq("http://krq.tao123.com/log.php?"+c.param(g))},sendReq:function(g){var h=parseInt((new Date().getTime())*Math.random()),j="log_"+h,i=window[j]=new Image();i.onload=(i.onerror=function(){window[j]=null});i.src=g+"&t="+h;i=null},pageName:location.href.replace(/.*\/html\/(.*)\/.*/,"$1")};a.on("click",function(i){var h=i.target;if(h.nodeName.toLowerCase()==="a"){h=new c.Node(h);var g=h.html()||"";d.saveLog({name:g,menupage:d.pageName})}else{if(h.parentNode.nodeName.toLowerCase()==="a"){h=new c.Node(h.parentNode);var g=h.html()||"";d.saveLog({name:g,menupage:d.pageName})}}});var e=c.DOM;a[0].appendChild(e.create('<a href="#" class="hide" id="dp">\u70b9\u8bc4</a>'));var f=c.one("#dp");c.all("a").each(function(h){var g=h.attr("data-siteid");if(!g){return}h.on("mouseover",function(i){var j=h.offset();f.css("left",j.left+h.width()+3+"px");f.css("top",j.top+h.height()/2-14+"px");f.attr("href","http://hao.taobao.com/dianping/dianping.php?siteid="+g);f.removeClass("hide")});h.on("mouseout",function(n){var j=parseInt(f.css("left")),k=parseInt(f.css("top")),i=f.width(),m=f.height();if(!(n.pageX>j-6&&n.pageX<(j+i+4)&&n.pageY>k&&n.pageY<(k+m))){f.addClass("hide")}});f.on("mouseout",function(i){f.addClass("hide")})})});